Version 4
SHEET 1 1780 1332
WIRE 656 272 576 272
WIRE 816 272 736 272
WIRE 864 272 816 272
WIRE 992 272 928 272
WIRE 1136 272 992 272
WIRE 1152 272 1136 272
WIRE 1152 288 1152 272
WIRE 816 304 816 272
WIRE 992 320 992 272
WIRE 768 384 704 384
WIRE 96 400 80 400
WIRE 288 400 96 400
WIRE 576 400 576 272
WIRE 576 400 288 400
WIRE 992 400 992 384
WIRE 1152 400 1152 368
WIRE 1152 400 992 400
WIRE -32 432 -176 432
WIRE 80 432 80 400
WIRE 80 432 -32 432
WIRE 816 432 816 400
WIRE 992 432 992 400
WIRE 288 448 288 400
WIRE 576 448 576 400
WIRE -32 464 -32 432
WIRE 512 496 496 496
WIRE 96 512 96 400
WIRE -32 544 -32 528
WIRE 288 544 288 528
WIRE 416 544 288 544
WIRE 496 544 496 496
WIRE 496 544 416 544
WIRE 288 560 288 544
WIRE 576 560 576 544
WIRE 704 560 704 384
WIRE 704 560 576 560
WIRE -176 576 -176 432
WIRE -176 576 -480 576
WIRE 576 576 576 560
WIRE 96 608 96 592
WIRE 224 608 96 608
WIRE 416 608 416 544
WIRE 96 624 96 608
WIRE 496 624 496 544
WIRE 512 624 496 624
WIRE -864 640 -992 640
WIRE -656 640 -864 640
WIRE -224 672 -256 672
WIRE -112 672 -144 672
WIRE -80 672 -112 672
WIRE 32 672 0 672
WIRE -864 688 -864 640
WIRE -768 736 -800 736
WIRE -656 736 -656 720
WIRE -656 736 -688 736
WIRE 96 736 96 720
WIRE 176 736 96 736
WIRE 288 736 288 656
WIRE 288 736 176 736
WIRE 416 736 416 688
WIRE 416 736 288 736
WIRE 576 736 576 672
WIRE 576 736 416 736
WIRE 176 768 176 736
WIRE -992 784 -992 640
WIRE -656 832 -656 736
WIRE -864 880 -864 784
WIRE -720 880 -864 880
WIRE -992 896 -992 864
WIRE -864 912 -864 880
WIRE -480 928 -480 576
WIRE -480 928 -656 928
WIRE 16 944 0 944
WIRE 208 944 16 944
WIRE 496 944 208 944
WIRE 624 944 496 944
WIRE 768 944 704 944
WIRE 816 944 768 944
WIRE 944 944 880 944
WIRE 992 944 944 944
WIRE 1136 944 1072 944
WIRE 1232 944 1136 944
WIRE 1248 944 1232 944
WIRE -480 976 -480 928
WIRE -112 976 -480 976
WIRE 0 976 0 944
WIRE 0 976 -112 976
WIRE 208 992 208 944
WIRE 496 992 496 944
WIRE 768 992 768 944
WIRE 1248 992 1248 944
WIRE -112 1008 -112 976
WIRE 944 1008 944 944
WIRE 1136 1008 1136 944
WIRE -864 1024 -864 992
WIRE 432 1040 416 1040
WIRE 16 1056 16 944
WIRE 720 1072 640 1072
WIRE -112 1088 -112 1072
WIRE 208 1088 208 1072
WIRE 336 1088 208 1088
WIRE 416 1088 416 1040
WIRE 416 1088 336 1088
WIRE 208 1104 208 1088
WIRE 496 1104 496 1088
WIRE 640 1104 640 1072
WIRE 640 1104 496 1104
WIRE 496 1120 496 1104
WIRE 768 1120 768 1088
WIRE 896 1120 768 1120
WIRE 944 1120 944 1072
WIRE 944 1120 896 1120
WIRE 1136 1120 1136 1072
WIRE 1136 1120 944 1120
WIRE 1248 1120 1248 1072
WIRE 1248 1120 1136 1120
WIRE 16 1152 16 1136
WIRE 144 1152 16 1152
WIRE 336 1152 336 1088
WIRE 896 1152 896 1120
WIRE 16 1168 16 1152
WIRE 416 1168 416 1088
WIRE 432 1168 416 1168
WIRE -304 1216 -336 1216
WIRE -192 1216 -224 1216
WIRE -160 1216 -192 1216
WIRE -48 1216 -80 1216
WIRE 16 1280 16 1264
WIRE 96 1280 16 1280
WIRE 208 1280 208 1200
WIRE 208 1280 96 1280
WIRE 336 1280 336 1232
WIRE 336 1280 208 1280
WIRE 496 1280 496 1216
WIRE 496 1280 336 1280
WIRE 96 1312 96 1280
FLAG 816 432 0
FLAG -992 896 0
FLAG 992 432 0
FLAG -256 672 0
FLAG 176 768 0
FLAG 816 272 Vsw+
FLAG 1136 272 out+
FLAG -864 1024 0
FLAG -32 544 0
FLAG -32 432 Vin
FLAG -992 640 USB
FLAG -112 672 PWM+
FLAG 896 1152 0
FLAG 1232 944 out-
FLAG -336 1216 0
FLAG 96 1312 0
FLAG -112 1088 0
FLAG -112 976 Vin
FLAG -192 1216 PWM-
FLAG 768 944 Vsw-
SYMBOL voltage -992 768 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName usb
SYMATTR Value 5.3
SYMBOL ind 640 288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 50µ
SYMBOL schottky 864 288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 976 320 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL voltage -128 672 R90
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -58 -168 VRight 2
SYMATTR Value PULSE(0 3.3 0 0.5n 0.5n 1.5u 5u)
SYMATTR InstName V2
SYMBOL res 1136 272 R0
SYMATTR InstName load+
SYMATTR Value 400
SYMBOL irfb4020 768 304 R0
SYMATTR InstName M2
SYMATTR Value IRLHS6242
SYMBOL res -96 688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL npn 32 624 R0
SYMATTR InstName Q1
SYMATTR Value BC546B
SYMBOL npn 224 560 R0
SYMATTR InstName Q2
SYMATTR Value BC546B
SYMBOL res 112 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 272 432 R0
SYMATTR InstName R5
SYMATTR Value 1.5k
SYMBOL res 400 592 R0
SYMATTR InstName R6
SYMATTR Value 150k
SYMBOL npn 512 448 R0
SYMATTR InstName Q3
SYMATTR Value 2N4401
SYMBOL pnp 512 672 M180
WINDOW 0 80 -14 Left 2
WINDOW 3 52 72 Left 2
SYMATTR InstName Q4
SYMATTR Value 2N4403
SYMBOL pnp -720 928 M180
WINDOW 0 80 -14 Left 2
WINDOW 3 52 72 Left 2
SYMATTR InstName Q5
SYMATTR Value BCW68F
SYMBOL res -880 896 R0
SYMATTR InstName R9
SYMATTR Value 820
SYMBOL pnp -800 784 R180
WINDOW 0 80 -14 Left 2
WINDOW 3 52 72 Left 2
SYMATTR InstName Q6
SYMATTR Value BC556B
SYMBOL res -784 752 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res -672 624 R0
SYMATTR InstName Rsense
SYMATTR Value 1.3
SYMBOL cap -48 464 R0
SYMATTR InstName C2
SYMATTR Value 2.2µ
SYMBOL irfb4020 720 992 R0
WINDOW 0 -30 23 VRight 2
WINDOW 3 78 -9 VRight 2
SYMATTR InstName M1
SYMATTR Value IRLHS6242
SYMBOL ind 608 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 50µ
SYMBOL schottky 928 1008 R0
SYMATTR InstName D2
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 816 960 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL res 1232 976 R0
SYMATTR InstName load-
SYMATTR Value 400
SYMBOL ind 976 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 50µ
SYMBOL cap 1120 1008 R0
SYMATTR InstName C4
SYMATTR Value 47µ
SYMBOL voltage -208 1216 R90
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -58 -168 VRight 2
SYMATTR Value PULSE(0 3.3 2.5u 0.5n 0.5n 1.5u 5u)
SYMATTR InstName V1
SYMBOL res -176 1232 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL npn -48 1168 R0
SYMATTR InstName Q7
SYMATTR Value BC546B
SYMBOL npn 144 1104 R0
SYMATTR InstName Q8
SYMATTR Value BC546B
SYMBOL res 32 1152 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 192 976 R0
SYMATTR InstName R7
SYMATTR Value 1.5k
SYMBOL res 320 1136 R0
SYMATTR InstName R10
SYMATTR Value 150k
SYMBOL npn 432 992 R0
SYMATTR InstName Q9
SYMATTR Value 2N4401
SYMBOL pnp 432 1216 M180
WINDOW 0 80 -14 Left 2
WINDOW 3 52 72 Left 2
SYMATTR InstName Q10
SYMATTR Value 2N4403
SYMBOL cap -128 1008 R0
SYMATTR InstName C5
SYMATTR Value 2.2µ
TEXT 24 264 Left 2 !.tran 100m
TEXT -1104 776 Left 2 ;USB in
TEXT -960 592 Left 2 ;~450-500mA current limiter
TEXT -264 752 Left 2 ;Teensy PWM out
TEXT 112 368 Left 2 ;3.3V to 5V level shifter
TEXT 368 424 Left 2 ;Totem-pole mosfet driver
TEXT 792 200 Left 2 ;Basic boost converter
TEXT -632 736 Left 2 ;= 0,7 / I_max
